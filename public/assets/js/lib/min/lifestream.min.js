!function(a){a.fn.lifestream=function(b){return this.each(function(){var c=a(this),d=jQuery.extend({classname:"lifestream",feedloaded:null,limit:10,list:[]},b),g={count:d.list.length,items:[]},e=jQuery.extend(!0,{},d),h=function(o){a.merge(g.items,o),g.items.sort(function(p,i){return i.date-p.date});for(var n,j=g.items,m=j.length<d.limit?j.length:d.limit,l=0,k=a('<ul class="'+d.classname+'"/>');m>l;l++){n=j[l],n.html&&a('<li class="'+d.classname+"-"+n.config.service+'">').data("name",n.config.service).data("url",n.url||"#").data("time",n.date).append(n.html).appendTo(k)}c.html(k),a.isFunction(d.feedloaded)&&d.feedloaded()},f=function(){var m=0,l=d.list.length;for(delete e.list;l>m;m++){var k=d.list[m];a.fn.lifestream.feeds[k.service]&&a.isFunction(a.fn.lifestream.feeds[k.service])&&k.user&&(k._settings=e,a.fn.lifestream.feeds[k.service](k,h))}};jQuery.tmpl?f():jQuery.getScript("//ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js",f)})},a.fn.lifestream.createYqlUrl=function(b){return(("https:"===document.location.protocol?"https":"http")+"://query.yahooapis.com/v1/public/yql?q=__QUERY__&env=store://datatables.org/alltableswithkeys&format=json").replace("__QUERY__",encodeURIComponent(b))},a.fn.lifestream.feeds=a.fn.lifestream.feeds||{},Object.keys||(Object.keys=function(d){if(d!==Object(d)){throw new TypeError("Object.keys called on non-object")}var c,b=[];for(c in d){Object.prototype.hasOwnProperty.call(d,c)&&b.push(c)}return b})}(jQuery),function(a){a.fn.lifestream.feeds.bitbucket=function(b,g){var d=a.extend({},{commit:'<a href="http://bitbucket.org/${owner}/${name}/changeset/${node}/">committed</a> at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',pullrequest_fulfilled:'fulfilled a pull request at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',pullrequest_rejected:'rejected a pull request at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',pullrequest_created:'created a pull request at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',create:'created a new project at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',fork:'forked <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>'},b.template),f=["commit","pullrequest_fulfilled","pullrequest_rejected","pullrequest_created","create","fork"],e=function(h){return -1!==a.inArray(h.event,f)&&h.repository?"commit"===h.event?a.tmpl(d.commit,{owner:h.repository.owner,name:h.repository.name,node:h.node}):a.tmpl(d[h.event],{owner:h.repository.owner,name:h.repository.name}):void 0},c=function(i){var h=[];return i.query&&i.query.count&&i.query.count>0&&a.each(i.query.results.json,function(){h.push({date:new Date(this.events.created_on.replace(/-/g,"/")),config:b,html:e(this.events)})}),h};return a.ajax({url:a.fn.lifestream.createYqlUrl('select events.event,events.node, events.created_on,events.repository.name, events.repository.owner from json where url = "https://api.bitbucket.org/1.0/users/'+b.user+'/events/"'),dataType:"jsonp",success:function(h){g(c(h))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.bitly=function(b,d){var c=a.extend({},{created:'created URL <a href="${short_url}" title="${title}">${short_url}</a>'},b.template);return a.ajax({url:a.fn.lifestream.createYqlUrl('select data.short_url, data.created, data.title from json where url="http://bitly.com/u/'+b.user+'.json"'),dataType:"jsonp",success:function(f){var g,l,e=[],h=0;if(f.query&&f.query.count&&f.query.results.json){for(l=f.query.results.json,g=l.length;g>h;h++){var k=l[h].data;e.push({date:new Date(1000*k.created),config:b,html:a.tmpl(c.created,k)})}}d(e)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.blogger=function(b,e){var d=a.extend({},{posted:'posted <a href="${origLink}">${title}</a>'},b.template),c=function(m){var q,n,p,h,f,g=[],o=0;if(m.query&&m.query.count&&m.query.count>0&&m.query.results.feed.entry){for(q=m.query.results.feed.entry,n=q.length;n>o;o++){if(p=q[o],!p.origLink){for(h=0,f=p.link.length;f>h;h++){"alternate"===p.link[h].rel&&(p.origLink=p.link[h].href)}}p.origLink&&(p.title.content&&(p.title=p.title.content),g.push({date:new Date(p.published),config:b,html:a.tmpl(d.posted,p)}))}}return g};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://'+b.user+'.blogspot.com/feeds/posts/default"'),dataType:"jsonp",success:function(f){e(c(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.citeulike=function(b,e){var c=a.extend({},{saved:'saved <a href="${href}">${title}</a> by ${authors}'},b.template),d=function(l){var g,f=[],h=0;if(l&&l.length&&l.length>0){for(g=l.length;g>h;h++){var k=l[h];f.push({date:new Date(k.date),config:b,url:"http://www.citeulike.org/user/"+b.user,html:a.tmpl(c.saved,k)})}}return f};return a.ajax({url:"http://www.citeulike.org/json/user/"+b.user,dataType:"jsonp",success:function(f){e(d(f))}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.dailymotion=function(c,e){var d=a.extend({},{uploaded:'uploaded a video <a href="${link}">${title[0]}</a>'},c.template),b=function(g){var m,h,l,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){l=m[k],f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.uploaded,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.dailymotion.com/rss/user/'+c.user+'"'),dataType:"jsonp",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.delicious=function(b,d){var c=a.extend({},{bookmarked:'bookmarked <a href="${u}">${d}</a>'},b.template);return a.ajax({url:"http://feeds.delicious.com/v2/json/"+b.user,dataType:"jsonp",success:function(k){var f,e=[],g=0;if(k&&k.length&&k.length>0){for(f=k.length;f>g;g++){var h=k[g];e.push({date:new Date(h.dt),config:b,html:a.tmpl(c.bookmarked,h)})}}d(e)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.deviantart=function(b,d){var c=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},b.template);return a.ajax({url:a.fn.lifestream.createYqlUrl('select title,link,pubDate from rss where url="http://backend.deviantart.com/rss.xml?q=gallery%3A'+encodeURIComponent(b.user)+'&type=deviation" | unique(field="title")'),dataType:"jsonp",success:function(l){var f,k,g,e=[],h=0;if(l.query&&l.query.count>0){for(f=l.query.results.item,g=f.length;g>h;h++){k=f[h],e.push({date:new Date(k.pubDate),config:b,html:a.tmpl(c.posted,k)})}}d(e)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.disqus=function(b,e){var d=a.extend({},{post:'commented on <a href="${url}">${thread.title}</a>',thread_like:'liked <a href="${url}">${thread.title}</a>'},b.template),c=function(g){var h,l,f=[],k=0;if(g){for(h=g.length;h>k;k++){l=g[k],"reply"!==l.type&&f.push({date:new Date(l.createdAt),config:b,html:a.tmpl(d[l.type],l.object)})}}return f};return a.ajax({url:"https://disqus.com/api/3.0/users/listActivity.json",data:{user:b.user,api_key:b.key},dataType:"jsonp",success:function(f){return 2===f.code?(e([]),console&&console.error&&console.error("Error loading Disqus stream.",f.response),void 0):(e(c(f.response)),void 0)}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.dribbble=function(b,d){var c=a.extend({},{posted:'posted a shot <a href="${url}">${title}</a>'},b.template);return a.ajax({url:"http://api.dribbble.com/players/"+b.user+"/shots",dataType:"jsonp",success:function(k){var f,e=[],g=0;if(k&&k.total){for(f=k.shots.length;f>g;g++){var h=k.shots[g];e.push({date:new Date(h.created_at),config:b,html:a.tmpl(c.posted,h)})}}d(e)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.facebook_page=function(c,e){var d=a.extend({},{wall_post:'post on wall <a href="${link}">${title}</a>'},c.template),b=function(g){var m,h,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){var l=m[k];a.trim(l.title)&&f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.wall_post,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="www.facebook.com/feeds/page.php?id='+c.user+'&format=rss20"'),dataType:"jsonp",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.fancy=function(b,e){var c=a.extend({},{fancied:'fancy\'d <a href="${link}">${title}</a>'},b.template),d=function(g){var h,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0){for(h=g.query.count;h>k;k++){var l=g.query.results.item[k];f.push({date:new Date(l.pubDate),config:b,html:a.tmpl(c.fancied,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('SELECT * FROM xml WHERE url="http://www.fancy.com/rss/'+b.user+'" AND itemPath="/rss/channel/item"'),dataType:"jsonp",success:function(f){e(d(f))}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.flickr=function(b,d){var c=a.extend({},{posted:'posted a photo <a href="${link}">${title}</a>'},b.template);return a.ajax({url:"http://api.flickr.com/services/feeds/photos_public.gne?id="+b.user+"&lang=en-us&format=json",dataType:"jsonp",jsonp:"jsoncallback",success:function(k){var f,e=[],g=0;if(k&&k.items&&k.items.length>0){for(f=k.items.length;f>g;g++){var h=k.items[g];e.push({date:new Date(h.published),config:b,html:a.tmpl(c.posted,h)})}}d(e)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.foomark=function(b,d){var c=a.extend({},{bookmarked:'bookmarked <a href="${url}">${url}</a>'},b.template);return a.ajax({url:"http://api.foomark.com/urls/list/",data:{format:"jsonp",username:b.user},dataType:"jsonp",success:function(k){var f,e=[],g=0;if(k&&k.length&&k.length>0){for(f=k.length;f>g;g++){var h=k[g];e.push({date:new Date(h.created_at.replace(/-/g,"/")),config:b,html:a.tmpl(c.bookmarked,h)})}}d(e)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.formspring=function(c,e){var d=a.extend({},{answered:'answered a question <a href="${link}">${title}</a>'},c.template),b=function(g){var m,h,l,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){l=m[k],f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.answered,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.formspring.me/profile/'+c.user+'.rss"'),dataType:"jsonp",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.forrst=function(b,d){var c=a.extend({},{posted:'posted a ${post_type} <a href="${post_url}">${title}</a>'},b.template);return a.ajax({url:"http://forrst.com/api/v2/users/posts?username="+b.user,dataType:"jsonp",success:function(k){var f,e=[],g=0;if(k&&k.resp.length&&k.resp.length>0){for(f=k.resp.length;f>g;g++){var h=k.resp[g];e.push({date:new Date(h.created_at.replace(" ","T")),config:b,html:a.tmpl(c.posted,h)})}}d(e)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.foursquare=function(b,e){var c=a.extend({},{checkedin:'checked in @ <a href="${link}">${title}</a>'},b.template),d=function(g){var h,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0){for(h=g.query.count;h>k;k++){var l=g.query.results.item[k];f.push({date:new Date(l.pubDate),config:b,html:a.tmpl(c.checkedin,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from rss where url="https://feeds.foursquare.com/history/'+b.user+'.rss"'),dataType:"jsonp",success:function(f){e(d(f))}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.gimmebar=function(b,d){var c=a.extend({},{bookmarked:'bookmarked <a href="${short_url}">${title}</a>'},b.template);return a.ajax({url:"https://gimmebar.com/api/v0/public/assets/"+b.user+".json?jsonp_callback=?",dataType:"json",success:function(k){k=k.records;var f,e=[],g=0;if(k&&k.length&&k.length>0){for(f=k.length;f>g;g++){var h=k[g];e.push({date:new Date(1000*h.date),config:b,html:a.tmpl(c.bookmarked,h)})}}d(e)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.github=function(b,f){var d=a.extend({},{commitCommentEvent:'commented on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',createBranchEvent:'created branch <a href="http://github.com/${status.repo.name}/tree/${status.payload.ref}">${status.payload.ref}</a> at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',createRepositoryEvent:'created repository <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',createTagEvent:'created tag <a href="http://github.com/${status.repo.name}/tree/${status.payload.ref}">${status.payload.ref}</a> at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',deleteBranchEvent:'deleted branch ${status.payload.ref} at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',deleteTagEvent:'deleted tag ${status.payload.ref} at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',followEvent:'started following <a href="http://github.com/${status.payload.target.login}">${status.payload.target.login}</a>',forkEvent:'forked <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',gistEvent:'${status.payload.action} gist <a href="http://gist.github.com/${status.payload.gist.id}">${status.payload.gist.id}</a>',issueCommentEvent:'commented on issue <a href="http://github.com/${status.repo.name}/issues/${status.payload.issue.number}">${status.payload.issue.number}</a> on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',issuesEvent:'${status.payload.action} issue <a href="http://github.com/${status.repo.name}/issues/${status.payload.issue.number}">${status.payload.issue.number}</a> on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',pullRequestEvent:'${status.payload.action} pull request <a href="http://github.com/${status.repo.name}/pull/${status.payload.number}">${status.payload.number}</a> on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',pushEvent:'pushed to <a href="http://github.com/${status.repo.name}/tree/${status.payload.ref}">${status.payload.ref}</a> at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',watchEvent:'started watching <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>'},b.template),c=function(g){return"CommitCommentEvent"===g.type?a.tmpl(d.commitCommentEvent,{status:g}):"CreateEvent"===g.type&&"branch"===g.payload.ref_type?a.tmpl(d.createBranchEvent,{status:g}):"CreateEvent"===g.type&&"repository"===g.payload.ref_type?a.tmpl(d.createRepositoryEvent,{status:g}):"CreateEvent"===g.type&&"tag"===g.payload.ref_type?a.tmpl(d.createTagEvent,{status:g}):"DeleteEvent"===g.type&&"branch"===g.payload.ref_type?a.tmpl(d.deleteBranchEvent,{status:g}):"DeleteEvent"===g.type&&"tag"===g.payload.ref_type?a.tmpl(d.deleteTagEvent,{status:g}):"FollowEvent"===g.type?a.tmpl(d.followEvent,{status:g}):"ForkEvent"===g.type?a.tmpl(d.forkEvent,{status:g}):"GistEvent"===g.type?("create"===g.payload.action?g.payload.action="created":"update"===g.payload.action&&(g.payload.action="updated"),a.tmpl(d.gistEvent,{status:g})):"IssueCommentEvent"===g.type?a.tmpl(d.issueCommentEvent,{status:g}):"IssuesEvent"===g.type?a.tmpl(d.issuesEvent,{status:g}):"PullRequestEvent"===g.type?a.tmpl(d.pullRequestEvent,{status:g}):"PushEvent"===g.type?(g.payload.ref=g.payload.ref.split("/")[2],a.tmpl(d.pushEvent,{status:g})):"WatchEvent"===g.type?a.tmpl(d.watchEvent,{status:g}):void 0},e=function(k){var l,h=[],m=0;if(k.query&&k.query.count&&k.query.count>0){for(l=k.query.count;l>m;m++){var g=k.query.results.json[m].json;h.push({date:new Date(g.created_at),config:b,html:c(g),url:"https://github.com/"+b.user})}}return h};return a.ajax({url:a.fn.lifestream.createYqlUrl('select json.type, json.actor, json.repo, json.payload, json.created_at from json where url="https://api.github.com/users/'+b.user+'/events/public?per_page=100"'),dataType:"jsonp",success:function(g){f(e(g))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.googleplus=function(b,e){var c=a.extend({},{posted:'<a href="${actor.url}">${actor.displayName}</a> has posted a new entry <a href="${url}" title="${id}">${title}</a> <!--With--> ${object.replies.totalItems} replies, ${object.plusoners.totalItems} +1s, ${object.resharers.totalItems} Reshares'},b.template),d=function(g){var h,l,f=[],k=0;if(g&&g.items){for(h=g.items.length;h>k;k++){l=g.items[k],f.push({date:new Date(l.published),config:b,html:a.tmpl(c.posted,l)})}}return f};return a.ajax({url:"https://www.googleapis.com/plus/v1/people/"+b.user+"/activities/public",data:{key:b.key},dataType:"jsonp",success:function(f){return f.error?(e([]),console&&console.error&&console.error("Error loading Google+ stream.",f.error),void 0):(e(d(f)),void 0)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.hypem=function(b,d){b.type&&"history"===b.type&&"loved"===b.type||(b.type="loved");var c=a.extend({},{loved:'loved <a href="http://hypem.com/item/${mediaid}">${title}</a> by <a href="http://hypem.com/artist/${artist}">${artist}</a>',history:'listened to <a href="http://hypem.com/item/${mediaid}">${title}</a> by <a href="http://hypem.com/artist/${artist}">${artist}</a>'},b.template);return a.ajax({url:"http://hypem.com/playlist/"+b.type+"/"+b.user+"/json/1/data.js",dataType:"json",success:function(m){var f=[],h=0,g=-1;for(var e in m){m.hasOwnProperty(e)&&g++}if(m&&g>0){for(;g>h;h++){var l=m[h];f.push({date:new Date(1000*("history"===b.type?l.dateplayed:l.dateloved)),config:b,html:a.tmpl("history"===b.type?c.history:c.loved,l)})}}d(f)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.instapaper=function(c,e){var d=a.extend({},{loved:'loved <a href="${link}">${title}</a>'},c.template),b=function(g){var m,h,l,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){l=m[k],f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.loved,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.instapaper.com/starred/rss/'+c.user+'"'),dataType:"jsonp",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.iusethis=function(c,e){var d=a.extend({},{global:'${action} <a href="${link}">${what}</a> on (${os})'},c.template),b=function(z){var w,v,u,r,p,h,A,y,t,q,x,s,g=[],o=0,f=["iPhone","OS X","Windows"];if(z.query&&z.query.count&&z.query.count>0&&z.query.results.rss){for(h=z.query.results.rss.length,t=["started using","stopped using","stopped loving","Downloaded","commented on","updated entry for","started loving","registered"],p=t.length;h>o;o++){for(s=f[o],w=z.query.results.rss[o].channel.item,v=0,u=w.length;u>v;v++){for(A=w[v],y=A.title.replace(c.user+" ",""),r=0;p>r;r++){if(y.indexOf(t[r])>-1){q=t[r];break}}x=y.split(q),g.push({date:new Date(A.pubDate),config:c,html:a.tmpl(d.global,{action:q.toLowerCase(),link:A.link,what:x[1],os:s})})}}}return g};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://iphone.iusethis.com/user/feed.rss/'+c.user+'" or url="http://osx.iusethis.com/user/feed.rss/'+c.user+'" or url="http://win.iusethis.com/user/feed.rss/'+c.user+'"'),dataType:"jsonp",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.lastfm=function(c,e){var d=a.extend({},{loved:'loved <a href="${url}">${name}</a> by <a href="${artist.url}">${artist.name}</a>'},c.template),b=function(g){var n,h,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.lovedtracks&&g.query.results.lovedtracks.track){for(n=g.query.results.lovedtracks.track,h=n.length;h>k;k++){var l=n[k],m=l.nowplaying?new Date:l.date.uts;f.push({date:new Date(parseInt(1000*m,10)),config:c,html:a.tmpl(d.loved,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://ws.audioscrobbler.com/2.0/user/'+c.user+'/lovedtracks.xml"'),dataType:"jsonp",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.librarything=function(c,e){var d=a.extend({},{book:'added <a href="http://www.librarything.com/work/book/${book.book_id}" title="${book.title} by ${book.author_fl}">${book.title} by ${book.author_fl}</a> to my library'},c.template),b=function(g){var f=[],j="";if(g.books){for(j in g.books){if(g.books.hasOwnProperty(j)){var h=g.books[j];f.push({date:new Date(1000*h.entry_stamp),config:c,html:a.tmpl(d.book,{book:h}),url:"http://www.librarything.com/profile/"+c.user})}}}return f};return a.ajax({url:"http://www.librarything.com/api_getdata.php?booksort=entry_REV&userid="+c.user,dataType:"jsonp",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.linkedin=function(d,g){var e=a.extend({},{posted:'<a href="${link}">${title}</a>'},d.template),b="jlsLinkedinCallback"+d.user,c=function(){var h='SELECT * FROM feed WHERE url="'+d.url+'"';return d.user&&(h+=' AND link LIKE "%'+d.user+'%"'),h},f=function(h){return{date:new Date(h.pubDate),config:d,html:a.tmpl(e.posted,h)}};return window[b]=function(j){var h=[],k=0;if(j.query&&j.query.count&&j.query.count>0){if(1===j.query.count){h.push(f(j.query.results.item))}else{for(k;k<j.query.count;k++){var l=j.query.results.item[k];h.push(f(l))}}}g(h)},a.ajax({url:a.fn.lifestream.createYqlUrl(c()),cache:!0,data:{_maxage:300},dataType:"jsonp",jsonpCallback:b}),{template:e}}}(jQuery),function(a){a.fn.lifestream.feeds.mendeley=function(c,e){var d=a.extend({},{flagged1:'flagged <a href="http://www.mendeley.com${link}">${title}</a>',flagged2:'flagged <a href="${link}">${title}</a>'},c.template),b=function(g){var m,h,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){var l=m[k],n="/"===l.link.charAt(0)?d.flagged1:d.flagged2;f.push({date:new Date(l.pubDate),config:c,url:"http://mendeley.com/groups/"+c.user,html:a.tmpl(n,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.mendeley.com/groups/'+c.user+'/feed/rss/"'),dataType:"jsonp",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.miso=function(b,e){var d=a.extend({},{watched:'checked in to <a href="${link}">${title}</a>'},b.template),c=function(g){var m,h,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){var l=m[k];f.push({url:"http://www.gomiso.com/feeds/user/"+b.user+"/checkins.rss",date:new Date(l.pubDate),config:b,html:a.tmpl(d.watched,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.gomiso.com/feeds/user/'+b.user+'/checkins.rss"'),dataType:"jsonp",success:function(f){e(c(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.mlkshk=function(c,e){var d=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},c.template),b=function(g){var m,h,l,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){l=m[k],f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.posted,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://mlkshk.com/user/'+c.user+'/rss"'),dataType:"jsonp",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.pinboard=function(b,e){var d=a.extend({},{bookmarked:'bookmarked <a href="${link}">${title}</a>'},b.template),c=function(g){var m,h,l,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0){for(m=g.query.results.RDF.item,h=m.length;h>k;k++){l=m[k],f.push({date:new Date(l.date),config:b,html:a.tmpl(d.bookmarked,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://feeds.pinboard.in/rss/u:'+b.user+'"'),dataType:"jsonp",success:function(f){e(c(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.pocket=function(c,e){var d=a.extend({},{pocketed:'pocketed <a href="${link}">${title}</a>'},c.template),b=function(g){var m,h,f=[],k=0;if(g.query&&g.query.results){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){var l=m[k],n=d.pocketed;f.push({date:new Date(l.pubDate),config:c,url:"http://getpocket.com",html:a.tmpl(n,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.getpocket.com/users/'+c.user+'/feed/all/"'),dataType:"json",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.posterous=function(c,e){var d=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},c.template),b=function(g){var m,h,l,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){l=m[k],f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.posted,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://'+c.user+'.posterous.com/rss.xml"'),dataType:"jsonp",success:function(f){e(b(f))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.quora=function(c,f){var d=a.extend({},{posted:'<a href="${link}">${title}</a>'},c.template),b=function(l){for(var h=0,g=l.link.length;g>h;h++){var k=l.link[h];if("string"==typeof k){return k}}return""},e=function(h){var g=[],o=[],m=0,l=0,k="";if(h.query&&h.query.count&&h.query.count>0){for(o=h.query.results.rss.channel.item,l=o.length,k=b(h.query.results.rss.channel);l>m;m++){var n=o[m];g.push({url:k,date:new Date(n.pubDate),config:c,html:a.tmpl(d.posted,n)})}}return g};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.quora.com/'+c.user+'/rss"'),dataType:"jsonp",success:function(g){f(e(g))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.reddit=function(b,f){var d=a.extend({},{commented:'<a href="http://www.reddit.com/r/${item.data.subreddit}/comments/${item.data.link_id.substring(3)}/u/${item.data.name.substring(3)}?context=3">commented (${score})</a> in <a href="http://www.reddit.com/r/${item.data.subreddit}">${item.data.subreddit}</a>',created:'<a href="http://www.reddit.com${item.data.permalink}">created new thread (${score})</a> in <a href="http://www.reddit.com/r/${item.data.subreddit}">${item.data.subreddit}</a>'},b.template),e=function(h){var i=h.data.ups-h.data.downs,g={item:h,score:i>0?"+"+i:i};return"t1"===h.kind?a.tmpl(d.commented,g):"t3"===h.kind?a.tmpl(d.created,g):void 0},c=function(g){return new Date(1000*g)};return a.ajax({url:"http://www.reddit.com/user/"+b.user+".json",dataType:"jsonp",jsonp:"jsonp",success:function(m){var h,g=[],k=0;if(m&&m.data&&m.data.children&&m.data.children.length>0){for(h=m.data.children.length;h>k;k++){var l=m.data.children[k];g.push({date:c(l.data.created_utc),config:b,html:e(l),url:"http://reddit.com/user/"+b.user})}}f(g)}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.rss=function(c,f){var d=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},c.template),b=function(l){for(var h=0,g=l.link.length;g>h;h++){var k=l.link[h];if("string"==typeof k){return k}}return""},e=function(h){var g=[],o=[],m=0,l=0,k="";if(h.query&&h.query.count&&h.query.count>0){for(o=h.query.results.rss.channel.item,l=o.length,k=b(h.query.results.rss.channel);l>m;m++){var n=o[m];g.push({url:k,date:new Date(n.pubDate),config:c,html:a.tmpl(d.posted,n)})}}return g};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="'+c.user+'"'),dataType:"jsonp",success:function(g){f(e(g))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.slideshare=function(b,e){var c=a.extend({},{uploaded:'uploaded a presentation <a href="${link}">${title}</a>'},b.template),d=function(g){var m,h,l,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){l=m[k],f.push({date:new Date(l.pubDate),config:b,html:a.tmpl(c.uploaded,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.slideshare.net/rss/user/'+b.user+'"'),dataType:"jsonp",success:function(f){e(d(f))}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.snipplr=function(b,e){var c=a.extend({},{posted:'posted a snippet <a href="${link}">${title}</a>'},b.template),d=function(g){var m,h,l,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){for(m=g.query.results.rss.channel.item,h=m.length;h>k;k++){l=m[k],f.push({date:new Date(l.pubDate),config:b,html:a.tmpl(c.posted,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://snipplr.com/rss/users/'+b.user+'"'),dataType:"jsonp",success:function(f){e(d(f))}})}}(jQuery),function(a){a.fn.lifestream.feeds.stackoverflow=function(b,f){var d=a.extend({},{global:'<a href="${link}">${text}</a> - ${title}'},b.template),e=function(j){var l="",k="",i="",h="http://stackoverflow.com/users/"+b.user,g="http://stackoverflow.com/questions/";return"badge"===j.timeline_type?(l="was "+j.action+" the '"+j.description+"' badge",k=j.detail,i=h+"?tab=reputation"):"comment"===j.timeline_type?(l="commented on",k=j.description,i=g+j.post_id):("revision"===j.timeline_type||"accepted"===j.timeline_type||"askoranswered"===j.timeline_type)&&(l="askoranswered"===j.timeline_type?j.action:j.action+" "+j.post_type,k=j.detail||j.description||"",i=g+j.post_id),{link:i,title:k,text:l}},c=function(g){return new Date(1000*g)};return a.ajax({url:"http://api.stackoverflow.com/1.1/users/"+b.user+"/timeline?jsonp",dataType:"jsonp",jsonp:"jsonp",success:function(m){var h,g=[],k=0;if(m&&m.total&&m.total>0&&m.user_timelines){for(h=m.user_timelines.length;h>k;k++){var l=m.user_timelines[k];g.push({date:c(l.creation_date),config:b,html:a.tmpl(d.global,e(l))})}}f(g)}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.tumblr=function(b,k){var i=a.extend({},{posted:'posted a ${type} <a href="${url}">${title}</a>'},b.template),e=b.limit||20,j=function(n){switch(n.type){case"photo":var l=n["photo-url"];return a('<img width="75" height="75"/>').attr({src:l[l.length-1].content,title:d(n),alt:d(n)}).wrap("<div/>").parent().html();case"video":var m=n["video-player"],o=m[m.length-1].content;return o.match(/<\s*script/)?null:o;case"audio":return n["audio-player"]+" "+a("<div/>").text(d(n)).html();default:return null}},g=function(m,l){return a(m[l]).filter(":not(:empty):first").text()},c=function(l){var m;switch(l.type){case"regular":return l["regular-title"]||g(l,"regular-body");case"link":return m=l["link-text"]||g(l,"link-description"),""===m&&(m=l["link-url"]),m;case"video":return g(l,"video-caption");case"audio":return g(l,"audio-caption");case"photo":return g(l,"photo-caption");case"quote":return'"'+l["quote-text"].replace(/<.+?>/g," ").trim()+'"';case"conversation":return m=l["conversation-title"],m||(m=l.conversation.line,"string"!=typeof m&&(m=m[0].label+" "+m[0].content+" ...")),m;case"answer":return l.question;default:return l.type}},d=function(l){var m=c(l)||"";return m.replace(/<.+?>/gi," ")},f=function(l,m){return{date:new Date(m.date),config:l,html:a.tmpl(i.posted,{type:m.type.replace("regular","blog entry"),url:m.url,image:j(m),title:d(m)})}},h=function(m){var n,p,l=[],o=0;if(m.query&&m.query.count&&m.query.count>0){if(a.isArray(m.query.results.posts.post)){for(n=m.query.results.posts.post.length;n>o;o++){p=m.query.results.posts.post[o],l.push(f(b,p))}}else{a.isPlainObject(m.query.results.posts.post)&&l.push(f(b,m.query.results.posts.post))}}return l};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from tumblr.posts where username="'+b.user+'" and num="'+e+'"'),dataType:"jsonp",success:function(l){k(h(l))}}),{template:i}}}(jQuery),function(a){a.fn.lifestream.feeds.twitter=function(c,g){var e=a.extend({},{posted:"{{html tweet}}"},c.template),b="jlsTwitterCallback"+c.user.replace(/[^a-zA-Z0-9]+/g,""),f=function(k){var i=function(l){return l.replace(/[a-z]+:\/\/[a-z0-9\-_]+\.[a-z0-9\-_:~%&\?\/.=]+[^:\.,\)\s*$]/gi,function(n){return'<a href="'+n+'">'+(n.length>25?n.substr(0,24)+"...":n)+"</a>"})},h=function(l){return l.replace(/(^|[^\w]+)\@([a-zA-Z0-9_]{1,15})/g,function(n,p,o){return p+'<a href="http://twitter.com/'+o+'">@'+o+"</a>"})},j=function(l){return l.replace(/(^|[^\w'"]+)\#([a-zA-Z0-9ÅåÄäÖöØøÆæÉéÈèÜüÊêÛûÎî_]+)/g,function(n,p,o){return p+'<a href="http://search.twitter.com/search?q=%23'+o+'">#'+o+"</a>"})};return j(h(i(k)))},d=function(l){var k=[],n=0,m=l.length;for(n;m>n;n++){var h=l[n];k.push({date:new Date(1000*h.created_at),config:c,html:a.tmpl(e.posted,{tweet:f(h.text),complete_url:"http://twitter.com/"+c.user+"/status/"+h.id_str}),url:"http://twitter.com/"+c.user})}return k};return window[b]=function(h){h.query&&h.query.count>0&&g(d(h.query.results.items))},a.ajax({url:a.fn.lifestream.createYqlUrl('USE "http://arminrosu.github.io/twitter-open-data-table/table.xml" AS twitter; SELECT * FROM twitter WHERE screen_name = "'+c.user+'"'),cache:!0,data:{_maxage:300},dataType:"jsonp",jsonpCallback:b}),{template:e}}}(jQuery),function(a){a.fn.lifestream.feeds.vimeo=function(b,e){var c=a.extend({},{liked:'liked <a href="${url}" title="${description}">${title}</a>',posted:'posted <a href="${url}" title="${description}">${title}</a>'},b.template),d=function(n,k){var h,p,g,o,f=[],l=0,m=k||"liked";if(n){for(h=n.length;h>l;l++){p=n[l],g="posted"===m?new Date(p.upload_date.replace(" ","T")):new Date(p.liked_on.replace(" ","T")),o=p.description?p.description.replace(/"/g,"'").replace(/<.+?>/gi,""):"",f.push({date:g,config:b,html:a.tmpl(c[m],{url:p.url,description:p.description?p.description.replace(/"/g,"'").replace(/<.+?>/gi,""):"",title:p.title})})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('SELECT * FROM xml WHERE url="http://vimeo.com/api/v2/'+b.user+'/likes.xml" OR url="http://vimeo.com/api/v2/'+b.user+'/videos.xml"'),dataType:"jsonp",success:function(g){var f=[];g.query.results.videos[0].video.length>0&&(f=f.concat(d(g.query.results.videos[0].video))),g.query.results.videos[1].video.length>0&&(f=f.concat(d(g.query.results.videos[1].video,"posted"))),e(f)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.wikipedia=function(b,e){var d=b.language||"en",c=a.extend({},{contribution:'contributed to <a href="${url}">${title}</a>'},b.template);return a.ajax({url:"http://"+d+".wikipedia.org/w/api.php?action=query&ucuser="+b.user+"&list=usercontribs&ucdir=older&format=json",dataType:"jsonp",success:function(l){var g,f=[],h=0;if(l&&l.query.usercontribs){for(g=l.query.usercontribs.length;g>h;h++){var k=l.query.usercontribs[h];k.url="http://"+d+".wikipedia.org/wiki/"+k.title.replace(" ","_"),f.push({date:new Date(k.timestamp),config:b,html:a.tmpl(c.contribution,k)})}}e(f)}}),{template:c}}}(jQuery),function(a){a.fn.lifestream.feeds.wordpress=function(c,f){var e=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},c.template),d=function(h){var n,k,m,g=[],l=0;if(h.query&&h.query.count&&h.query.count>0&&h.query.results.rss.channel.item){for(n=h.query.results.rss.channel.item,k=n.length;k>l;l++){m=n[l],g.push({date:new Date(m.pubDate),config:c,html:a.tmpl(e.posted,m)})}}return g},b="";return c.user&&(b=0===c.user.indexOf("http://")?c.user+"/feed":"http://"+c.user+".wordpress.com/feed",a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="'+b+'"'),dataType:"jsonp",success:function(g){f(d(g))}})),{template:e}}}(jQuery),function(a){a.fn.lifestream.feeds.youtube=function(c,e){var d=a.extend({},{uploaded:'uploaded <a href="${video.player.default}" title="${video.description}">${video.title}</a>',favorited:'favorited <a href="${video.player.default}" title="${video.description}">${video.title}</a>'},c.template),b=function(o,h){var m,p,f,k,l,g=[],n=0;if(o.data&&o.data.items){for(m=o.data.items.length;m>n;n++){switch(p=o.data.items[n],h){case"favorited":f=p.video,k=p.created,l=p;break;case"uploaded":f=p,k=f.uploaded,l={video:f}}f.player&&f.player["default"]&&g.push({date:new Date(k),config:c,html:a.tmpl(d[h],l)})}}return g};return a.ajax({url:"http://gdata.youtube.com/feeds/api/users/"+c.user+"/favorites?v=2&alt=jsonc",dataType:"jsonp",success:function(f){e(b(f,"favorited"))}}),a.ajax({url:"http://gdata.youtube.com/feeds/api/users/"+c.user+"/uploads?v=2&alt=jsonc",dataType:"jsonp",success:function(f){e(b(f,"uploaded"))}}),{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.zotero=function(b,e){var c=a.extend({},{flagged:'flagged <a href="${id}">${title}</a> by ${creatorSummary}'},b.template),d=function(g){var m,h,f=[],k=0;if(g.query&&g.query.count&&g.query.count>0){for(m=g.query.results.feed.entry,h=m.length;h>k;k++){var l=m[k];f.push({date:new Date(l.updated),config:b,url:"http://zotero.com/users/"+b.user,html:a.tmpl(c.flagged,l)})}}return f};return a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="https://api.zotero.org/users/'+b.user+'/items"'),dataType:"jsonp",success:function(f){e(d(f))}}),{template:c}}}(jQuery);